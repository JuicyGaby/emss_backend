import{E as te,o as f,c as F,d as e,x as l,a6 as Se,ag as Ne,C as i,t as de,K as z,B as C,r as m,a4 as pe,ah as we,y as I,ab as H,X as N,ac as O,J as T,D as J,F as $,a as j,A as B,z as X,O as Y,aa as k,ae as ke,M as ve,G as q,ai as Ie,aj as he,a7 as R,a8 as Ae,ak as Ue,k as ye,al as Fe,am as $e,an as Be,ao as Re,ap as Te,aq as qe,ar as We,H as xe,as as Pe,at as Ce,au as Ee,av as je,aw as He,ax as Me,ay as Oe,az as Ye,aA as Le,aB as Ge,aC as ze,a3 as Ke,aD as oe,aE as Ve,aF as Je,aG as Xe,aH as Qe}from"./index-DgBO3Ov5.js";import{e as L,V as Q,a as K,b as G,d as W,h as ue,c as be}from"./VDialog-Pzjt_2Nj.js";import{e as Ze,j as ge,i as ne,a as De,c as re,f as ce,_ as fe,g as ae,V as me}from"./VTabs-Uc2G_oqb.js";import{s as el}from"./patients-DU3j-CMs.js";const _e={__name:"dialogs",props:{dialogData:Object},emits:["closeDialog","handleAction"],setup(M,{emit:h}){const g=M,c=h;te(()=>{console.log(g.dialogData)});const b=()=>{c("handleAction",g.dialogData.itemId)},w=()=>{console.log("close dialog"),c("closeDialog")};return(V,A)=>(f(),F("div",null,[e(Ze,{rounded:""},{default:l(()=>[e(Se,{type:g.dialogData.type,variant:"outlined"},{default:l(()=>[e(Ne,null,{default:l(()=>[i(de(g.dialogData.text),1)]),_:1}),e(z,{class:"justify-end mt-5"},{default:l(()=>[e(C,{color:g.dialogData.buttonColor,onClick:b},{default:l(()=>[i(de(g.dialogData.buttonText),1)]),_:1},8,["color"]),e(C,{color:"error",onClick:w},{default:l(()=>[i("Close")]),_:1})]),_:1})]),_:1},8,["type"])]),_:1})]))}},ll={class:""},al={__name:"CreateDARDialog",emits:["addDAR","closeDialog","editDAR"],setup(M,{emit:h}){const g=h,c=m({isCreated:!1});te(async()=>{await se()});const b=m({type:"success",text:"Social Work Administration created successfully!",buttonText:"Edit",buttonColor:"primary",itemId:""}),w=m({isVisible:!1,type:"",text:""}),V=pe(),A=m(2),x=m(null),D=m({}),n=m({isExisting:!0,creatorFullName:`${V.user.fname} ${V.user.lname}`,creatorId:V.user.id}),d=m({isExisting:!1,creatorFullName:`${V.user.fname} ${V.user.lname}`,creatorId:V.user.id});m({});let y=m([]),u=m([]);const s={required:S=>!!S||"This field is required",invalidNegative:S=>S>=0||"Invalid input",characters:S=>S.length<=20||"Max 20 characters",vselect:S=>S.length>0||"This field is required"},v={search:{first_name:{label:"First Name",type:"text"},last_name:{label:"Last Name",type:"text"}},selectField:{patient_name:{label:"Patient Name",type:"text",rules:[s.required,s.characters]}},creation:{textFields:{first_name:{label:"First Name",type:"text",rules:[s.required,s.characters]},middle_name:{label:"Middle Name",type:"text",rules:[s.required,s.characters]},last_name:{label:"Last Name",type:"text",rules:[s.required,s.characters]},age:{label:"Age",type:"number",rules:[s.required,s.invalidNegative]},occupation:{label:"Occupation",type:"text",rules:[s.required,s.characters]}},sex:{label:"Sex",items:["Male","Female"],rules:[s.required]},civil_status:{label:"Civil Status",items:["Child","Single","Married","Widowed","Separated"],rules:[s.required]},highest_education_level:{label:"Education Attainment",items:["Elementary","High School","College","Vocational","Post Graduate"],rules:[s.required]},phic_member:{label:"PHIC Member",items:["Yes","No"],rules:[s.required]},phic_classification:{label:"PHIC Classification",items:[{title:"Financially Capable - A",value:"A"},{title:"Financially Capacitated - B",value:"B"},{title:"Financially Incapable - C1",value:"C1"},{title:"Financially Incapacitated - C2",value:"C2"},{title:"Indigent - C3",value:"C3"},{title:"Indigent - D",value:"D"}],rules:[s.required]}}},U=()=>{c.value.isCreated=!1,g("closeDialog","dar")},P=async S=>{const _=S?n.value:d.value;if(!await ie())return;const r=await Ie(_);r&&(b.value.itemId=r.id,c.value.isCreated=!0,g("addDAR","dar",r))},ie=async()=>(await x.value.validate()).valid?(console.log("Form is valid"),!0):!1,Z=async()=>{const S=await el(D.value);if(S.length<=0){u.value=[],le("error","No patient found");return}le("success",`${S.length} Patients found`),u.value=S},se=async()=>{const S=await we();y.value=S},le=(S,_)=>{w.value={isVisible:!0,type:S,text:_}},ee=S=>{g("editDAR",S),c.value.isCreated=!1};return(S,_)=>(f(),F($,null,[I("div",ll,[e(q,{height:"auto",width:"auto"},{default:l(()=>[e(H,{color:"secondary",class:"px-2 d-flex align-center"},{default:l(()=>[e(N,{size:"large"},{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i("Create Daily Activity Report")]),_:1}),e(L),e(C,{icon:"",onClick:U},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(ge,{modelValue:A.value,"onUpdate:modelValue":_[0]||(_[0]=p=>A.value=p),density:"compact","align-tabs":"center"},{default:l(()=>[e(ne,{value:1},{default:l(()=>[i("Not Existing")]),_:1}),e(ne,{value:2},{default:l(()=>[i("Existing")]),_:1})]),_:1},8,["modelValue"]),e(De,{modelValue:A.value,"onUpdate:modelValue":_[13]||(_[13]=p=>A.value=p)},{default:l(()=>[e(re,{value:1},{default:l(()=>[e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(K,null,{default:l(()=>[e(J,{ref_key:"createDARForm",ref:x},{default:l(()=>[e(G,{cols:"12",class:"py-0 d-flex flex-wrap ga-1"},{default:l(()=>[(f(!0),F($,null,j(v.creation.textFields,(p,r)=>(f(),B(X,{key:r,variant:"outlined",label:p.label,density:"compact",style:{width:"200px"},type:p.type,rules:p.rules,modelValue:d.value[r],"onUpdate:modelValue":a=>d.value[r]=a},null,8,["label","type","rules","modelValue","onUpdate:modelValue"]))),128)),e(Y,{label:v.creation.sex.label,variant:"outlined",density:"compact",style:{width:"200px"},items:v.creation.sex.items,rules:v.creation.sex.rules,modelValue:d.value.sex,"onUpdate:modelValue":_[1]||(_[1]=p=>d.value.sex=p)},null,8,["label","items","rules","modelValue"]),e(Y,{label:v.creation.civil_status.label,variant:"outlined",density:"compact",style:{width:"200px"},items:v.creation.civil_status.items,rules:v.creation.civil_status.rules,modelValue:d.value.civil_status,"onUpdate:modelValue":_[2]||(_[2]=p=>d.value.civil_status=p)},null,8,["label","items","rules","modelValue"]),e(Y,{label:v.creation.highest_education_level.label,variant:"outlined",density:"compact",style:{width:"200px"},items:v.creation.highest_education_level.items,rules:v.creation.highest_education_level.rules,modelValue:d.value.highest_education_level,"onUpdate:modelValue":_[3]||(_[3]=p=>d.value.highest_education_level=p)},null,8,["label","items","rules","modelValue"]),e(Y,{label:v.creation.phic_member.label,variant:"outlined",density:"compact",style:{width:"200px"},items:v.creation.phic_member.items,rules:v.creation.phic_member.rules,modelValue:d.value.phic_member,"onUpdate:modelValue":_[4]||(_[4]=p=>d.value.phic_member=p)},null,8,["label","items","rules","modelValue"]),e(Y,{label:v.creation.phic_classification.label,variant:"outlined",density:"compact",style:{width:"200px"},items:v.creation.phic_classification.items,"item-title":"title","item-value":"value",rules:v.creation.phic_classification.rules,modelValue:d.value.phic_classification,"onUpdate:modelValue":_[5]||(_[5]=p=>d.value.phic_classification=p)},null,8,["label","items","rules","modelValue"]),e(ce,{chips:"",multiple:"","closable-chips":"",label:"Services",items:k(y),"item-title":"service_name","item-value":"id",variant:"outlined",density:"compact",style:{width:"200px"},modelValue:d.value.services,"onUpdate:modelValue":_[6]||(_[6]=p=>d.value.services=p),rules:[s.required,s.vselect]},null,8,["items","modelValue","rules"])]),_:1})]),_:1},512)]),_:1}),e(z,{class:"justify-end mt-5"},{default:l(()=>[e(C,{"prepend-icon":"mdi-book-plus",color:"secondary",onClick:_[7]||(_[7]=p=>P(!1))},{default:l(()=>[i("Create Patient")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(re,{value:2},{default:l(()=>[e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12",class:"py-0 d-flex flex-wrap ga-1"},{default:l(()=>[(f(!0),F($,null,j(v.search,(p,r)=>(f(),B(X,{key:r,variant:"outlined",label:p.label,density:"compact",style:{width:"200px"},modelValue:D.value[r],"onUpdate:modelValue":a=>D.value[r]=a,onKeyup:ke(Z,["enter"])},null,8,["label","modelValue","onUpdate:modelValue"]))),128)),e(C,{"prepend-icon":"mdi-magnify",variant:"flat",color:"secondary",disabled:!D.value.first_name&&!D.value.last_name,onClick:Z},{default:l(()=>[i("Search")]),_:1},8,["disabled"])]),_:1})]),_:1}),k(u)&&k(u).length>0?(f(),B(K,{key:0,class:"ma-0"},{default:l(()=>[e(J,{ref_key:"createDARForm",ref:x},{default:l(()=>[e(G,{cols:"12",class:"ma-0 pa-0 d-flex flex-wrap ga-1"},{default:l(()=>[e(Y,{label:"Patient Name",items:k(u),"item-title":"fullname","item-value":"id",variant:"outlined",density:"compact",style:{width:"500px"},modelValue:n.value.patient_id,"onUpdate:modelValue":_[8]||(_[8]=p=>n.value.patient_id=p),rules:[s.required]},null,8,["items","modelValue","rules"]),e(Y,{label:v.creation.phic_member.label,items:v.creation.phic_member.items,variant:"outlined",density:"compact",style:{width:"200px"},modelValue:n.value.phic_member,"onUpdate:modelValue":_[9]||(_[9]=p=>n.value.phic_member=p),rules:[s.required]},null,8,["label","items","modelValue","rules"]),e(Y,{label:v.creation.phic_classification.label,items:v.creation.phic_classification.items,"item-title":"title","item-value":"value",variant:"outlined",density:"compact",style:{width:"200px"},modelValue:n.value.phic_classification,"onUpdate:modelValue":_[10]||(_[10]=p=>n.value.phic_classification=p),rules:[s.required]},null,8,["label","items","modelValue","rules"]),e(ce,{chips:"",multiple:"","closable-chips":"",label:"Services",items:k(y),"item-title":"service_name","item-value":"id",variant:"outlined",density:"compact",style:{width:"500px"},modelValue:n.value.services,"onUpdate:modelValue":_[11]||(_[11]=p=>n.value.services=p),rules:[s.required,s.vselect]},null,8,["items","modelValue","rules"])]),_:1}),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"secondary","prepend-icon":"mdi-book-plus",onClick:_[12]||(_[12]=p=>P(!0))},{default:l(()=>[i("Create Report")]),_:1})]),_:1})]),_:1},512)]),_:1})):ve("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{class:"justify-end pa-8"})]),_:1})]),I("div",null,[e(W,{modelValue:c.value.isCreated,"onUpdate:modelValue":_[14]||(_[14]=p=>c.value.isCreated=p),width:"auto",persistent:""},{default:l(()=>[e(_e,{dialogData:b.value,onHandleAction:ee,onCloseDialog:U},null,8,["dialogData"])]),_:1},8,["modelValue"])]),e(fe,{snackBarData:w.value},null,8,["snackBarData"])],64))}},tl={__name:"DarPageOne",props:{dar_id:Number},setup(M){const h=M;te(async()=>{await x()});const g=m(null),c=m({}),b=m({});m(0);const w=m({isVisible:!1,type:"",text:""}),V={part1:{textFields:{first_name:{label:"First Name"},middle_name:{label:"Middle Name"},last_name:{label:"Last Name"},age:{label:"Age",type:"number"},occupation:{label:"Occupation"},monthly_income:{label:"Monthly Income",type:"number"},religion:{label:"Religion"}},selectFields:{sex:{label:"Sex",items:["Male","Female"]},civil_status:{label:"Civil Status",items:["Child","Single","Married","Widowed","Sep - In-Fact","Sep - Legal","CLP - Opposite Sex","CLP - Same Sex"]},highest_education_level:{label:" Educational Attainment",items:["Undergraduate","Elementary","High School","Vocational","College","Post Graduate"]}},darSelectFields:{area:{label:"Area",items:["Basic Ward","Non-Basic Ward","OP","ER/ED"]},case_type:{label:"Case Type",items:["New Case","Old Case","Case Closed"]},indirect_contributor:{label:"Contributor type",items:["Indirect - POS","Indirect - Sponsored","Indirect - 4PS","Indirect - PWD","Indirect - SC","Direct - Lifetime","Direct - Employed","Direct - Voluntary","Direct - OFW"]}},titleValueFields:{is_phic_member:{label:"PHIC Member",items:[{title:"Yes",value:1},{title:"No",value:0}]},classification:{label:"PHIC Classification",items:[{title:"Financially Capable - A",value:"A"},{title:"Financially Capacitated - B",value:"B"},{title:"Financially Incapable - C1",value:"C1"},{title:"Financially Incapacitated - C2",value:"C2"},{title:"Indigent - C3",value:"C3"},{title:"Indigent - D",value:"D"}]}}},part2:{textFields:{house_hold_size:{label:"Household Size"},informant:{label:"Informant Name"},relationship_to_patient:{label:"Relationship to Patient"}},selectFields:{sectoral_grouping:{label:"Sectoral Grouping",items:["SC","PWD","Solo Parent","IP","BHW","Brgy. Officials","Veterans","Health Worker","Government Worker","Custodial","Artisanal Fisherfolk","Farmer and Landless Rural Worker","Urban Poor","Formal Labor & Migrant Workers","Workers in Informal Sectors","Victims of Disaster & Calamity","Others"]},source_of_referral:{label:"Source of Referral",items:["Government Hospital","Private Hospitals/Clinics","Politicians","Media","Health Care Team","NGO’s/Private Welfare Agencies","Government Agencies","Walk – in","Others"]}},timeFields:{interview_start_time:{label:"Interview Start Time",type:"time"},interview_end_time:{label:"Interview End Time",type:"time"}}}},A=async()=>{if(!await Ae(g))return;console.log("darData",c.value);const d=await Ue(c.value);d&&(console.log("update",d),D("success","Daily Activity Report Updated"))},x=async()=>{const n=await he(h.dar_id);c.value=n,n.interview_start_time||(c.value.interview_start_time=ue().format("HH:mm")),b.value=c.value.patients},D=(n,d)=>{w.value.isVisible=!0,w.value.type=n,w.value.text=d};return(n,d)=>(f(),F($,null,[I("div",null,[e(q,null,{default:l(()=>[e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"darForm",ref:g},{default:l(()=>[e(K,{class:""},{default:l(()=>[e(G,{cols:"12",class:"d-flex flex-wrap ga-2"},{default:l(()=>[(f(!0),F($,null,j(V.part2.timeFields,(y,u)=>(f(),B(X,{key:u,label:y.label,variant:"outlined",density:"compact",type:"time",style:{width:"500px"},modelValue:c.value[u],"onUpdate:modelValue":s=>c.value[u]=s,rules:[k(R).required]},null,8,["label","modelValue","onUpdate:modelValue","rules"]))),128)),e(X,{label:"Admission Date",variant:"outlined",density:"compact",style:{width:"500px"},type:"datetime-local",modelValue:c.value.admission_date,"onUpdate:modelValue":d[0]||(d[0]=y=>c.value.admission_date=y),rules:[k(R).required]},null,8,["modelValue","rules"]),(f(!0),F($,null,j(V.part1.textFields,(y,u)=>(f(),B(X,{key:u,label:y.label,variant:"outlined",density:"compact",style:{width:"500px"},type:y.type,modelValue:b.value[u],"onUpdate:modelValue":s=>b.value[u]=s,rules:[k(R).required]},null,8,["label","type","modelValue","onUpdate:modelValue","rules"]))),128)),(f(!0),F($,null,j(V.part1.selectFields,(y,u)=>(f(),B(Y,{key:u,label:y.label,items:y.items,variant:"outlined",density:"compact",style:{width:"500px"},modelValue:b.value[u],"onUpdate:modelValue":s=>b.value[u]=s,autocomplete:"",rules:[k(R).required]},null,8,["label","items","modelValue","onUpdate:modelValue","rules"]))),128)),(f(!0),F($,null,j(V.part1.darSelectFields,(y,u)=>(f(),B(Y,{key:u,label:y.label,items:y.items,variant:"outlined",density:"compact",style:{width:"500px"},autocomplete:"",modelValue:c.value[u],"onUpdate:modelValue":s=>c.value[u]=s,rules:[k(R).required]},null,8,["label","items","modelValue","onUpdate:modelValue","rules"]))),128)),(f(!0),F($,null,j(V.part1.titleValueFields,(y,u)=>(f(),B(Y,{key:u,label:y.label,items:y.items,"item-title":"title","item-value":"value",variant:"outlined",density:"compact",style:{width:"500px"},autocomplete:"",modelValue:c.value[u],"onUpdate:modelValue":s=>c.value[u]=s,readonly:""},null,8,["label","items","modelValue","onUpdate:modelValue"]))),128)),(f(!0),F($,null,j(V.part2.selectFields,(y,u)=>(f(),B(Y,{key:u,label:y.label,items:y.items,variant:"outlined",density:"compact",style:{width:"500px"},modelValue:c.value[u],"onUpdate:modelValue":s=>c.value[u]=s,autocomplete:"",rules:[k(R).required]},null,8,["label","items","modelValue","onUpdate:modelValue","rules"]))),128)),(f(!0),F($,null,j(V.part2.textFields,(y,u)=>(f(),B(X,{key:u,label:y.label,variant:"outlined",density:"compact",style:{width:"500px"},type:y.type,modelValue:c.value[u],"onUpdate:modelValue":s=>c.value[u]=s,rules:[k(R).required]},null,8,["label","type","modelValue","onUpdate:modelValue","rules"]))),128)),e(ae,{label:"Diagnosis",variant:"outlined",style:{width:"1000px"},density:"compact",rules:[k(R).required],modelValue:c.value.diagnosis,"onUpdate:modelValue":d[1]||(d[1]=y=>c.value.diagnosis=y)},null,8,["rules","modelValue"]),e(ae,{label:"Remarks",variant:"outlined",style:{width:"1000px"},density:"compact",modelValue:c.value.remarks,"onUpdate:modelValue":d[2]||(d[2]=y=>c.value.remarks=y)},null,8,["modelValue"])]),_:1}),e(G,null,{default:l(()=>[e(C,{"prepend-icon":"mdi-update",color:"secondary",onClick:A},{default:l(()=>[i("Update Daily Activity Report")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),e(fe,{snackBarData:w.value},null,8,["snackBarData"])],64))}},il=I("h2",null,"I. Services Notes",-1),sl={class:"px-5 my-5"},ol={class:"d-flex ga-5"},ul=I("h2",null,"II. Availed Services",-1),dl={class:"px-5 mt-5"},nl={__name:"DarPageTwo",props:{dar_id:Number},setup(M){const h=M,g=m({isVisible:!1,text:"",type:""}),c=m({text:"Are you sure to delete this note",type:"warning",buttonText:"Delete",buttonColor:"error",itemId:""}),b=pe(),w=m(null),V=m([]),A=ye(()=>V.value.map((r,a)=>({...r,number:a+1}))),x=m({dar_id:h.dar_id,created_by:`${b.user.fname} ${b.user.lname}`,creator_id:b.user.id}),D=m({}),n=m([]),d=m([]),y=m({services:[],dar_id:h.dar_id}),u={tableHeaders:[{title:"Number",value:"number"},{title:"Date Created",value:"date_created"},{title:"Title",value:"note_title"},{title:"Created By",value:"created_by"},{title:"Operation",value:"operation"}]},s=m({createNote:{isVisible:!1},editNote:{isVisible:!1},deleteNote:{isVisible:!1},viewNote:{isVisible:!1},createService:{isVisible:!1}}),v={textFields:{note_title:{label:"Note Title",rules:[R.required,R.maxLengthTextField]}},textAreas:{note_body:{label:"Note Body",rules:[R.required,R.maxLengthTextArea]}}},U=async()=>!!(await w.value.validate()).valid,P=async()=>{const r=await we();d.value=r},ie=async r=>{const a=await Fe(r);n.value=a,y.value.services=n.value.map(t=>t.id)},Z=async r=>{const a=await $e(r);V.value=a},se=async()=>{if(!await U())return;const a=await Be(y.value);a&&(p("Service added successfully","success"),s.value.createService.isVisible=!1,n.value=n.value.concat(a))},le=async()=>{if(!await U())return;const a=await Re(x.value);a&&(p("Note created successfully","success"),s.value.createNote.isVisible=!1,V.value.push(a),x.value={dar_id:h.dar_id,created_by:`${b.user.fname} ${b.user.lname}`,creator_id:b.user.id})},ee=async()=>{if(!await U())return;const a=await Te(D.value);if(a){console.log("response",a),p("Note updated successfully","success"),s.value.editNote.isVisible=!1;const t=V.value.findIndex(o=>o.id===D.value.id);V.value[t]=a,D.value={dar_id:h.dar_id,created_by:`${b.user.fname} ${b.user.lname}`,creator_id:b.user.id}}},S=async(r,a)=>{const t=await qe(r);c.value.itemId=r,D.value=t,s.value[a].isVisible=!0},_=async()=>{if(console.log(c.value.itemId),s.value.deleteNote.isVisible=!1,await We(c.value.itemId)){p("Note deleted successfully","success");const a=V.value.findIndex(t=>t.id===c.value.itemId);V.value.splice(a,1)}},p=(r,a)=>{g.value.text=r,g.value.type=a,g.value.isVisible=!0};return te(async()=>{await Z(h.dar_id),await P(),await ie(h.dar_id)}),(r,a)=>(f(),F($,null,[I("div",null,[e(q,null,{default:l(()=>[e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[il,e(K,null,{default:l(()=>[e(G,{cols:"12",class:""},{default:l(()=>[I("div",sl,[e(q,null,{default:l(()=>[e(H,{density:"compact",color:"secondary",class:"px-5",rounded:""},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i("Services Notes")]),_:1}),e(C,{variant:"outlined","prepend-icon":"mdi-note-plus",onClick:a[0]||(a[0]=t=>s.value.createNote.isVisible=!0)},{default:l(()=>[i("Create Note")]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(be,{density:"compact",headers:u.tableHeaders,items:A.value,"items-per-page":5},{"item.operation":l(({item:t})=>[I("div",ol,[t.creator_id===k(b).user.id?(f(),B(N,{key:0,color:"primary",onClick:o=>S(t.id,"editNote")},{default:l(()=>[i("mdi-pencil")]),_:2},1032,["onClick"])):ve("",!0),e(N,{color:"secondary",onClick:o=>S(t.id,"viewNote")},{default:l(()=>[i("mdi-eye")]),_:2},1032,["onClick"]),t.creator_id===k(b).user.id?(f(),B(N,{key:1,color:"error",onClick:o=>S(t.id,"deleteNote")},{default:l(()=>[i("mdi-delete")]),_:2},1032,["onClick"])):ve("",!0)])]),_:2},1032,["headers","items"])]),_:1})]),_:1})])]),_:1})]),_:1}),ul,e(K,null,{default:l(()=>[e(G,{cols:"12",class:""},{default:l(()=>[I("div",dl,[e(ce,{chips:"",multiple:"",label:"Services",variant:"outlined",density:"compact",items:n.value,"item-title":"service_name",modelValue:n.value,"onUpdate:modelValue":a[1]||(a[1]=t=>n.value=t),readonly:""},null,8,["items","modelValue"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{"prepend-icon":"mdi-plus",variant:"default",color:"primary",onClick:a[2]||(a[2]=t=>s.value.createService.isVisible=!0)},{default:l(()=>[i("Add Service")]),_:1})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(W,{modelValue:s.value.createNote.isVisible,"onUpdate:modelValue":a[4]||(a[4]=t=>s.value.createNote.isVisible=t),width:"600px"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{density:"comfortable",color:"secondary",class:"pl-5"},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i(" Add Note ")]),_:1}),e(L),e(C,{icon:"",onClick:a[3]||(a[3]=t=>s.value.createNote.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(J,{ref_key:"noteForm",ref:w},{default:l(()=>[e(T,{class:"d-flex flex-column ga-2"},{default:l(()=>[(f(!0),F($,null,j(v.textFields,(t,o)=>(f(),B(me,{key:o,label:t.label,variant:"outlined",density:"compact",counter:"20",items:n.value,"item-title":"service_name","return-object":!1,modelValue:x.value[o],"onUpdate:modelValue":E=>x.value[o]=E},null,8,["label","items","modelValue","onUpdate:modelValue"]))),128)),(f(!0),F($,null,j(v.textAreas,(t,o)=>(f(),B(ae,{key:o,label:t.label,variant:"outlined",density:"compact",modelValue:x.value[o],"onUpdate:modelValue":E=>x.value[o]=E,counter:"500",rules:t.rules},null,8,["label","modelValue","onUpdate:modelValue","rules"]))),128)),e(z,{class:"justify-end"},{default:l(()=>[e(C,{"prepend-icon":"mdi-book-plus",color:"secondary",onClick:le},{default:l(()=>[i("Create Note")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:s.value.deleteNote.isVisible,"onUpdate:modelValue":a[6]||(a[6]=t=>s.value.deleteNote.isVisible=t),width:"400px"},{default:l(()=>[e(_e,{dialogData:c.value,onHandleAction:_,onCloseDialog:a[5]||(a[5]=t=>s.value.deleteNote.isVisible=!1)},null,8,["dialogData"])]),_:1},8,["modelValue"]),e(W,{modelValue:s.value.editNote.isVisible,"onUpdate:modelValue":a[8]||(a[8]=t=>s.value.editNote.isVisible=t),width:"600px"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{density:"comfortable",color:"secondary",class:"pl-5"},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-pencil")]),_:1}),e(O,null,{default:l(()=>[i(" Edit Note ")]),_:1}),e(L),e(C,{icon:"",onClick:a[7]||(a[7]=t=>s.value.editNote.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(J,{ref_key:"noteForm",ref:w},{default:l(()=>[e(T,{class:"d-flex flex-column ga-2"},{default:l(()=>[(f(!0),F($,null,j(v.textFields,(t,o)=>(f(),B(me,{key:o,label:t.label,variant:"outlined",density:"compact",counter:"20",items:n.value,"item-title":"service_name","return-object":!1,modelValue:D.value[o],"onUpdate:modelValue":E=>D.value[o]=E,rules:[k(R).required]},null,8,["label","items","modelValue","onUpdate:modelValue","rules"]))),128)),(f(!0),F($,null,j(v.textAreas,(t,o)=>(f(),B(ae,{key:o,label:t.label,variant:"outlined",density:"compact",counter:"500",rules:t.rules,modelValue:D.value[o],"onUpdate:modelValue":E=>D.value[o]=E},null,8,["label","rules","modelValue","onUpdate:modelValue"]))),128)),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"secondary",onClick:ee},{default:l(()=>[i("Update Note")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:s.value.viewNote.isVisible,"onUpdate:modelValue":a[10]||(a[10]=t=>s.value.viewNote.isVisible=t),width:"600px"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{density:"comfortable",color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i(" View Note ")]),_:1}),e(L),e(C,{icon:"",onClick:a[9]||(a[9]=t=>s.value.viewNote.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,{class:"d-flex flex-column ga-2"},{default:l(()=>[(f(!0),F($,null,j(v.textFields,(t,o)=>(f(),B(X,{key:o,label:t.label,variant:"outlined",density:"compact",counter:"20",rules:t.rules,modelValue:D.value[o],"onUpdate:modelValue":E=>D.value[o]=E,readonly:""},null,8,["label","rules","modelValue","onUpdate:modelValue"]))),128)),(f(!0),F($,null,j(v.textAreas,(t,o)=>(f(),B(ae,{key:o,label:t.label,variant:"outlined",density:"compact",counter:"500",rules:t.rules,modelValue:D.value[o],"onUpdate:modelValue":E=>D.value[o]=E,readonly:""},null,8,["label","rules","modelValue","onUpdate:modelValue"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:s.value.createService.isVisible,"onUpdate:modelValue":a[13]||(a[13]=t=>s.value.createService.isVisible=t),width:"600px"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{density:"compact",color:"secondary",class:"pl-5"},{default:l(()=>[e(N,null,{default:l(()=>[i(" mdi-book-plus ")]),_:1}),e(O,null,{default:l(()=>[i(" Add Service ")]),_:1}),e(L),e(C,{icon:"",onClick:a[11]||(a[11]=t=>s.value.createService.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(J,{ref_key:"noteForm",ref:w},{default:l(()=>[e(T,null,{default:l(()=>[e(ce,{chips:"",multiple:"","closable-chips":"",label:"Services",variant:"outlined",density:"compact",items:d.value,"item-title":"service_name","item-value":"id",modelValue:y.value.services,"onUpdate:modelValue":a[12]||(a[12]=t=>y.value.services=t),rules:[k(R).required,k(R).vselect]},null,8,["items","modelValue","rules"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{"prepend-icon":"mdi-book-plus",color:"secondary",onClick:se},{default:l(()=>[i("Add Service")]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue"]),e(fe,{snackBarData:g.value},null,8,["snackBarData"])],64))}},rl={__name:"EditDARDialog",props:{dar_id:Number},emits:["closeDialog"],setup(M,{emit:h}){te(()=>{});const g=h,c=m(1);return(b,w)=>(f(),B(q,null,{default:l(()=>[e(H,{color:"secondary",class:"px-5"},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i("Update Daily Activity Report")]),_:1}),e(L),e(C,{icon:"mdi-close",onClick:w[0]||(w[0]=V=>g("closeDialog","dar"))})]),_:1}),e(xe,{"primary-title":""},{default:l(()=>[e(ge,{modelValue:c.value,"onUpdate:modelValue":w[1]||(w[1]=V=>c.value=V),"align-tabs":"center",density:"compact"},{default:l(()=>[e(ne,{value:1},{default:l(()=>[i("Demographic Data")]),_:1}),e(ne,{value:2},{default:l(()=>[i("Services")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(T,null,{default:l(()=>[e(De,{modelValue:c.value,"onUpdate:modelValue":w[2]||(w[2]=V=>c.value=V)},{default:l(()=>[e(re,{value:1},{default:l(()=>[e(tl,{dar_id:M.dar_id},null,8,["dar_id"])]),_:1}),e(re,{value:2},{default:l(()=>[e(nl,{dar_id:M.dar_id},null,8,["dar_id"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}))}},cl=I("h2",null,"Daily Activity Report",-1),ml={__name:"ViewDARDialog",props:{dar_id:Number},setup(M){return(h,g)=>(f(),F("div",null,[e(q,null,{default:l(()=>[e(xe,{"primary-title":""},{default:l(()=>[e(N,{size:"x-large"},{default:l(()=>[i("mdi-book-edit")]),_:1}),cl]),_:1}),e(T)]),_:1})]))}},vl={class:"d-flex align-center justify-center"},pl={__name:"CreateSWADialog",emits:["addSwa","closeDialog","editSwa"],setup(M,{emit:h}){const g=h,c=pe(),b=m([]),w=m(null),V=m({create:{isVisible:!1}}),A=m({text:"Social Work Administration Item created successfully!",type:"success",buttonText:"Edit",buttonColor:"primary",itemId:""}),x={required:v=>!!v||"This field is required",invalidNegative:v=>v>=0||"Invalid input",characters:v=>v.length<=20||"Max 20 characters",vselect:v=>v.length>0||"This field is required"},D=m({creator_id:c.user.id,creator_fullname:`${c.user.fname} ${c.user.lname}`}),n=async()=>{if(!await d())return;const U=await Pe(D.value);U&&(A.value.itemId=U.id,V.value.create.isVisible=!0,console.log(U),g("addSwa","swa",U))},d=async()=>(await w.value.validate()).valid?(console.log("Form is valid"),!0):!1,y=async()=>{const v=await Ce();b.value=v},u=()=>{V.value.create.isVisible=!1,g("closeDialog")},s=v=>{V.value.create.isVisible=!1,g("editSwa","swa",v),g("closeDialog")};return te(async()=>{await y()}),(v,U)=>(f(),F($,null,[I("div",vl,[e(q,{height:"auto",width:"600px"},{default:l(()=>[e(H,{color:"secondary",class:"px-2 d-flex align-center"},{default:l(()=>[e(N,{size:"large"},{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i("Social Work Administration")]),_:1}),e(L),e(C,{icon:"",onClick:U[0]||(U[0]=P=>v.$emit("closeDialog"))},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"swaForm",ref:w},{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[e(X,{label:"Social Worker",variant:"outlined",readonly:"",modelValue:D.value.creator_fullname,"onUpdate:modelValue":U[1]||(U[1]=P=>D.value.creator_fullname=P)},null,8,["modelValue"]),e(ce,{label:"SWA Services",chips:"",clearable:"",multiple:"","closable-chips":"",items:b.value,"item-title":"service_name","item-value":"id",variant:"outlined",hint:"Double Check Services Availed","persistent-hint":!0,modelValue:D.value.services,"onUpdate:modelValue":U[2]||(U[2]=P=>D.value.services=P),rules:[x.required,x.vselect]},null,8,["items","modelValue","rules"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"secondary",onClick:n},{default:l(()=>[i("Create")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),e(W,{modelValue:V.value.create.isVisible,"onUpdate:modelValue":U[3]||(U[3]=P=>V.value.create.isVisible=P),width:"500"},{default:l(()=>[e(_e,{dialogData:A.value,onCloseDialog:u,onHandleAction:s},null,8,["dialogData"])]),_:1},8,["modelValue"])],64))}},fl=I("h2",{class:"my-5"},"I. Social Work Administration",-1),_l={class:"d-flex ga-5"},Vl=I("h2",{class:"my-5"},"II. Services",-1),yl={__name:"EditSWADialog",props:{swa_id:Number},emits:["closeDialog"],setup(M,{emit:h}){const g=M,c=h,b=pe(),w=m(null),V=m([]),A=m([]),x=m([]),D=m({isVisible:!1,text:"",type:""}),n=m({text:"Are you sure to delete this note",type:"warning",buttonText:"Delete",buttonColor:"error",itemId:""}),d=m({note:{dar_swa_id:g.swa_id,created_by:`${b.user.fname} ${b.user.lname}`,creator_id:b.user.id},services:{services:[],swa_id:g.swa_id},dynamicInput:{}}),y=m({headers:[{title:"Number",value:"number"},{title:"Date Created",value:"date_created"},{title:"Title",value:"note_title"},{title:"Created By",value:"created_by"},{title:"Operation",value:"operation"}]}),u=m({createDialog:{isVisible:!1},updateDialog:{isVisible:!1},readDialog:{isVisible:!1},deleteDialog:{isVisible:!1},addServicesDialog:{isVisible:!1}}),s=m({comboFields:{note_title:{label:"Note Title",rules:[R.required,R.characters]}},textAreaFields:{note_body:{label:"Note",rules:[R.required,R.textArea]}}}),v=ye(()=>x.value.map((r,a)=>({...r,number:a+1}))),U=async()=>{const r=await Ee(g.swa_id);r&&(A.value=r,d.value.services.services=A.value.map(a=>a.id))},P=async()=>{const r=await Ce();V.value=r},ie=async()=>{const r=await je(g.swa_id);r&&(x.value=r)},Z=async()=>{if(!await S())return;const a=await He(d.value.services);a&&(_("Service added successfully!","success"),A.value=A.value.concat(a),u.value.addServicesDialog.isVisible=!1)},se=async()=>{if(!await S())return;console.log(d.value.note);const a=await Me(d.value.note);_("Note created successfully!","success"),console.log(a),x.value.push(a),u.value.createDialog.isVisible=!1,d.value.note={dar_swa_id:g.swa_id,created_by:`${b.user.fname} ${b.user.lname}`,creator_id:b.user.id}},le=async()=>{if(!await S())return;const a=await Oe(d.value.dynamicInput);if(a){_("Note updated successfully!","success");const t=x.value.findIndex(o=>o.id===d.value.dynamicInput.id);x.value[t]=a,u.value.updateDialog.isVisible=!1}},ee=async r=>{await Ye(r)&&(_("Note deleted successfully!","success"),x.value=x.value.filter(t=>t.id!==r),u.value.deleteDialog.isVisible=!1)},S=async()=>!!(await w.value.validate()).valid,_=(r,a)=>{D.value.text=r,D.value.type=a,D.value.isVisible=!0},p=async(r,a)=>{const t=await Le(r);d.value.dynamicInput=t,n.value.itemId=r,u.value[a].isVisible=!0};return te(async()=>{await U(),await P(),await ie()}),(r,a)=>(f(),F($,null,[I("div",null,[e(q,{height:"100vh"},{default:l(()=>[e(H,{color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i("Edit SWA")]),_:1}),e(L),e(C,{icon:"",onClick:a[0]||(a[0]=t=>c("closeDialog"))},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[fl,e(q,null,{default:l(()=>[e(H,{color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i("SWA Notes")]),_:1}),e(L),e(C,{"prepend-icon":"mdi-note-plus",variant:"outlined",onClick:a[1]||(a[1]=t=>u.value.createDialog.isVisible=!0)},{default:l(()=>[i("Create Note")]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(be,{headers:y.value.headers,items:v.value,"items-per-page":5},{"item.operation":l(({item:t})=>[I("div",_l,[t.creator_id===k(b).user.id?(f(),B(N,{key:0,color:"primary",onClick:o=>p(t.id,"updateDialog")},{default:l(()=>[i("mdi-pencil")]),_:2},1032,["onClick"])):ve("",!0),e(N,{color:"secondary",onClick:o=>p(t.id,"readDialog")},{default:l(()=>[i("mdi-eye")]),_:2},1032,["onClick"]),t.creator_id===k(b).user.id?(f(),B(N,{key:1,color:"error",onClick:o=>p(t.id,"deleteDialog")},{default:l(()=>[i("mdi-delete")]),_:2},1032,["onClick"])):ve("",!0)])]),_:2},1032,["headers","items"])]),_:1})]),_:1}),Vl,e(Y,{chips:"",multiple:"",variant:"outlined",readonly:"",items:A.value,"item-title":"service_name",obj:"","item-value":"id",label:"Services Availed",modelValue:A.value,"onUpdate:modelValue":a[2]||(a[2]=t=>A.value=t)},null,8,["items","modelValue"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{"prepend-icon":"mdi-plus",color:"primary",onClick:a[3]||(a[3]=t=>u.value.addServicesDialog.isVisible=!0)},{default:l(()=>[i(" Add Services")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),I("div",null,[e(W,{modelValue:u.value.createDialog.isVisible,"onUpdate:modelValue":a[7]||(a[7]=t=>u.value.createDialog.isVisible=t),width:"600"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{color:"secondary",class:"pl-5"},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-book-plus")]),_:1}),e(O,null,{default:l(()=>[i("Create Note")]),_:1}),e(L),e(C,{icon:"",onClick:a[4]||(a[4]=t=>u.value.createDialog.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(J,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"swaForm",ref:w},{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[e(me,{label:"Note Title",variant:"outlined",counter:"50",items:A.value,"item-title":"service_name","return-object":!1,rules:s.value.comboFields.note_title.rules,modelValue:d.value.note.note_title,"onUpdate:modelValue":a[5]||(a[5]=t=>d.value.note.note_title=t)},null,8,["items","rules","modelValue"]),e(ae,{label:"Note",variant:"outlined",counter:"500",rules:s.value.textAreaFields.note_body.rules,modelValue:d.value.note.note_body,"onUpdate:modelValue":a[6]||(a[6]=t=>d.value.note.note_body=t)},null,8,["rules","modelValue"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"primary",onClick:se},{default:l(()=>[i("Create Note")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:u.value.updateDialog.isVisible,"onUpdate:modelValue":a[11]||(a[11]=t=>u.value.updateDialog.isVisible=t),width:"600"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i("Update Note")]),_:1}),e(L),e(C,{icon:"",onClick:a[8]||(a[8]=t=>u.value.updateDialog.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"swaForm",ref:w},{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[e(me,{items:A.value,"item-title":"service_name","return-object":!1,label:"Note Title",variant:"outlined",counter:"50",modelValue:d.value.dynamicInput.note_title,"onUpdate:modelValue":a[9]||(a[9]=t=>d.value.dynamicInput.note_title=t),rules:s.value.comboFields.note_title.rules},null,8,["items","modelValue","rules"]),e(ae,{label:"Note",variant:"outlined",counter:"500",modelValue:d.value.dynamicInput.note_body,"onUpdate:modelValue":a[10]||(a[10]=t=>d.value.dynamicInput.note_body=t),rules:s.value.textAreaFields.note_body.rules},null,8,["modelValue","rules"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"primary",onClick:le},{default:l(()=>[i("Update")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:u.value.readDialog.isVisible,"onUpdate:modelValue":a[15]||(a[15]=t=>u.value.readDialog.isVisible=t),width:"600"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i("Read Note")]),_:1}),e(L),e(C,{icon:"",onClick:a[12]||(a[12]=t=>u.value.readDialog.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[e(me,{items:A.value,"item-title":"service_name","return-object":!1,label:"Note Title",variant:"outlined",counter:"50",modelValue:d.value.dynamicInput.note_title,"onUpdate:modelValue":a[13]||(a[13]=t=>d.value.dynamicInput.note_title=t),readonly:""},null,8,["items","modelValue"]),e(ae,{label:"Note",variant:"outlined",counter:"500",modelValue:d.value.dynamicInput.note_body,"onUpdate:modelValue":a[14]||(a[14]=t=>d.value.dynamicInput.note_body=t),readonly:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(W,{modelValue:u.value.deleteDialog.isVisible,"onUpdate:modelValue":a[17]||(a[17]=t=>u.value.deleteDialog.isVisible=t),width:"500"},{default:l(()=>[e(_e,{dialogData:n.value,onHandleAction:ee,onCloseDialog:a[16]||(a[16]=t=>u.value.deleteDialog.isVisible=!1)},null,8,["dialogData"])]),_:1},8,["modelValue"]),e(W,{modelValue:u.value.addServicesDialog.isVisible,"onUpdate:modelValue":a[20]||(a[20]=t=>u.value.addServicesDialog.isVisible=t),width:"600"},{default:l(()=>[e(q,null,{default:l(()=>[e(H,{color:"secondary"},{default:l(()=>[e(O,null,{default:l(()=>[i(" Add Services ")]),_:1}),e(L),e(C,{icon:"",onClick:a[18]||(a[18]=t=>u.value.addServicesDialog.isVisible=!1)},{default:l(()=>[e(N,null,{default:l(()=>[i("mdi-close")]),_:1})]),_:1})]),_:1}),e(T,null,{default:l(()=>[e(Q,null,{default:l(()=>[e(J,{ref_key:"swaForm",ref:w},{default:l(()=>[e(K,null,{default:l(()=>[e(G,{cols:"12"},{default:l(()=>[e(ce,{chips:"",multiple:"","closable-chips":"",items:V.value,"item-title":"service_name","item-value":"id",label:"Services",variant:"outlined",modelValue:d.value.services.services,"onUpdate:modelValue":a[19]||(a[19]=t=>d.value.services.services=t),rules:[k(R).required,k(R).vselect]},null,8,["items","modelValue","rules"]),e(z,{class:"justify-end"},{default:l(()=>[e(C,{color:"primary",onClick:Z},{default:l(()=>[i(" Add Service")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e(fe,{snackBarData:D.value},null,8,["snackBarData"])],64))}},bl={class:"rb"},gl=I("h1",null,"Daily Activity Report",-1),Dl={class:"ma-3"},wl={class:"mb-5"},xl={class:"d-flex justify-space-between align-center"},Cl={class:"d-flex align-center ga-2"},Sl={class:"d-flex ga-5"},Nl={class:"mb-5"},kl={class:"ma-3 d-flex justify-space-between align-center"},Il={class:"d-flex align-center ga-2 justify-center"},hl={class:"d-flex ga-5"},Bl={__name:"DailyActivityReportView",setup(M){te(async()=>{await d(),await y()});let h=m([]),g=m([]);const c=m(1);let b=m(0),w=m(0);const V=m(""),A=pe();`${A.user.fname}${A.user.lname}`;const x=m({dar:ue().format("YYYY-MM-DD"),swa:ue().format("YYYY-MM-DD"),current_date:ue().format("MMMM Do YYYY")}),D={headers:[{title:"Number",value:"Number"},{title:"Admission Date-Time",value:"date_created"},{title:"Patient Name",value:"fullname"},{title:"Created By",value:"created_by"},{title:"Operation",value:"operation"}],swa:{headers:[{title:"Number",value:"Number"},{title:"Admission Date-Time",value:"date_created"},{title:"Social Worker",value:"creator_name"},{title:"Operation",value:"operation"}]}},n=m({dar:{create:!1,edit:!1,view:!1,delete:!1},swa:{create:!1,edit:!1,view:!1,delete:!1}}),d=async()=>{const a=await Ge();a.length>0&&(h.value=a)},y=async()=>{const a=await ze();a.length>0&&(g.value=a)},u=async()=>{console.log(x.value.swa);const a=await Je(x.value.swa);if(ee(`Successfully  fetched ${a.length} Items`,"primary"),a.length>0){g.value=a;return}g.value=[]},s=async()=>{const a=await Xe(x.value.dar);if(ee(`Successfully  fetched ${a.length} Items`,"primary"),a.length>0){h.value=a;return}h.value=[]},v=ye(()=>h.value.map((a,t)=>({Number:t+1,...a}))),U=ye(()=>g.value.map((a,t)=>({Number:t+1,...a}))),P=a=>{n.value.dar.edit=!0,b.value=a},ie=a=>{console.log("Edit DAR",a)},Z=a=>{w.value=a,n.value.swa.edit=!0},se=async a=>{n.value.dar.delete=!0,oe.value.text="Are you sure you want to delete this item?",oe.value.type="warning",oe.value.buttonText="Delete",oe.value.buttonColor="error",oe.value.itemId=a},le=async a=>{await Qe(a)&&(n.value.dar.delete=!1,ee("Successfully deleted item","success"),h.value=h.value.filter(o=>o.id!==a))},ee=(a,t)=>{Ve.value.text=a,Ve.value.type=t,Ve.value.isVisible=!0},S=(a,t)=>{a==="dar"?h.value.push(t):a==="swa"&&(console.log("pushing",t),g.value.push(t))},_=a=>{n.value.dar.create=!1,P(a)},p=(a,t)=>{a==="dar"?P(t):a==="swa"&&Z(t)},r=a=>{n.value[a].create=!1,n.value[a].edit=!1};return(a,t)=>(f(),F($,null,[I("div",bl,[e(q,{width:"100%"},{default:l(()=>[e(H,{color:"secondary",class:"d-flex align-center ga-5 px-5"},{default:l(()=>[e(N,{size:"x-large"},{default:l(()=>[i("mdi-book-edit")]),_:1}),gl]),_:1}),e(ge,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=o=>c.value=o),"align-tabs":"start"},{default:l(()=>[e(ne,{value:1},{default:l(()=>[i("Daily Activity Report")]),_:1}),e(ne,{value:2},{default:l(()=>[i("Social Work Administration")]),_:1})]),_:1},8,["modelValue"]),e(Ke),e(T,null,{default:l(()=>[e(De,{modelValue:c.value,"onUpdate:modelValue":t[8]||(t[8]=o=>c.value=o)},{default:l(()=>[e(re,{value:1},{default:l(()=>[I("div",Dl,[I("h1",wl,de(x.value.current_date)+" - "+de(k(ue)().format("dddd")),1),I("div",xl,[e(C,{color:"secondary","prepend-icon":"mdi-folder-plus",onClick:t[1]||(t[1]=o=>n.value.dar.create=!0),class:"mb-6"},{default:l(()=>[i("Create Entry")]),_:1}),I("div",Cl,[e(X,{type:"date",variant:"outlined",density:"compact",modelValue:x.value.dar,"onUpdate:modelValue":t[2]||(t[2]=o=>x.value.dar=o)},null,8,["modelValue"]),e(C,{color:"grey",class:"mb-6",onClick:t[3]||(t[3]=o=>s()),"prepend-icon":"mdi-calendar-range"},{default:l(()=>[i("Filter Date")]),_:1})])]),e(X,{"prepend-inner-icon":"mdi-magnify",label:"Search Patient","single-line":"","hide-details":"",variant:"outlined",density:"comfortable",modelValue:V.value,"onUpdate:modelValue":t[4]||(t[4]=o=>V.value=o),style:{"max-width":"400px"}},null,8,["modelValue"])]),e(be,{search:V.value,headers:D.headers,items:v.value,"items-per-page":5},{"item.operation":l(({item:o})=>[I("div",Sl,[e(N,{color:"primary",onClick:E=>P(o.id)},{default:l(()=>[i("mdi-pencil")]),_:2},1032,["onClick"]),e(N,{color:"secondary",onClick:E=>ie(o)},{default:l(()=>[i("mdi-eye")]),_:2},1032,["onClick"]),e(N,{color:"error",onClick:E=>se(o.id)},{default:l(()=>[i("mdi-delete")]),_:2},1032,["onClick"])])]),_:2},1032,["search","headers","items"])]),_:1}),e(re,{value:2},{default:l(()=>[I("h1",Nl,de(x.value.current_date)+" - "+de(k(ue)().format("dddd")),1),I("div",kl,[e(C,{color:"secondary",onClick:t[5]||(t[5]=o=>n.value.swa.create=!0),"prepend-icon":"mdi-folder-plus"},{default:l(()=>[i("Create Entry")]),_:1}),I("div",Il,[e(X,{type:"date",variant:"outlined",density:"compact",modelValue:x.value.swa,"onUpdate:modelValue":t[6]||(t[6]=o=>x.value.swa=o)},null,8,["modelValue"]),e(C,{color:"grey",class:"mb-6",onClick:t[7]||(t[7]=o=>u()),"prepend-icon":"mdi-calendar-range"},{default:l(()=>[i("Filter Date")]),_:1})])]),e(be,{headers:D.swa.headers,"items-per-page":5,items:U.value},{"item.operation":l(({item:o})=>[I("div",hl,[e(N,{color:"primary",onClick:E=>Z(o.id)},{default:l(()=>[i("mdi-pencil")]),_:2},1032,["onClick"]),e(N,{color:"secondary"},{default:l(()=>[i("mdi-eye")]),_:1})])]),_:2},1032,["headers","items"])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),I("div",null,[e(W,{modelValue:n.value.dar.create,"onUpdate:modelValue":t[9]||(t[9]=o=>n.value.dar.create=o),width:"600px",persistent:""},{default:l(()=>[e(al,{onAddDAR:S,onCloseDialog:r,onEditDAR:_})]),_:1},8,["modelValue"]),e(W,{modelValue:n.value.dar.edit,"onUpdate:modelValue":t[10]||(t[10]=o=>n.value.dar.edit=o),fullscreen:"",scrollable:"",transition:"dialog-transition"},{default:l(()=>[e(rl,{dar_id:k(b),onCloseDialog:r},null,8,["dar_id"])]),_:1},8,["modelValue"]),e(W,{modelValue:n.value.dar.view,"onUpdate:modelValue":t[11]||(t[11]=o=>n.value.dar.view=o),width:"600px",transition:"dialog-transition"},{default:l(()=>[e(ml,{dar_id:k(b)},null,8,["dar_id"])]),_:1},8,["modelValue"]),e(W,{modelValue:n.value.dar.delete,"onUpdate:modelValue":t[13]||(t[13]=o=>n.value.dar.delete=o),width:"600px"},{default:l(()=>[e(_e,{dialogData:k(oe),onCloseDialog:t[12]||(t[12]=()=>n.value.dar.delete=!1),onHandleAction:le},null,8,["dialogData"])]),_:1},8,["modelValue"]),e(W,{modelValue:n.value.swa.create,"onUpdate:modelValue":t[15]||(t[15]=o=>n.value.swa.create=o),transition:"dialog-transition"},{default:l(()=>[e(pl,{onCloseDialog:t[14]||(t[14]=o=>n.value.swa.create=!1),onAddSwa:S,onEditSwa:p})]),_:1},8,["modelValue"]),e(W,{modelValue:n.value.swa.edit,"onUpdate:modelValue":t[17]||(t[17]=o=>n.value.swa.edit=o),fullscreen:"",scrollable:"",transition:"dialog-transition",swa_id:k(w)},{default:l(()=>[e(yl,{swa_id:k(w),onCloseDialog:t[16]||(t[16]=o=>n.value.swa.edit=!1)},null,8,["swa_id"]),i(" /> ")]),_:1},8,["modelValue","swa_id"])]),e(fe,{snackBarData:k(Ve)},null,8,["snackBarData"])],64))}};export{Bl as default};
